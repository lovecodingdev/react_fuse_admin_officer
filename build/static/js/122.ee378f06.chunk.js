(this["webpackJsonpfuse-react-app"]=this["webpackJsonpfuse-react-app"]||[]).push([[122],{1293:function(t,e,a){"use strict";var n=a(6),c=a(13),r=a(0),l=a.n(r),o=a(8),i=a(9),s=a(4),u=a(40),b=a(1334),d=a(1337),p=a(1331),m=a(1335),O=a(1336),f=a(2624),j=a(1245),v=a(1521),g=a(1261),h=a(159),y=a(1236),w=a(649),k=Object(y.a)((function(t){return{root:{display:"flex",flexWrap:"wrap"},margin:{margin:t.spacing(1)},spin:{"& input::-webkit-clear-button, & input::-webkit-outer-spin-button, & input::-webkit-inner-spin-button":{display:"none"}}}}));var E=function(t){var e=k(),a=t.id,n=t.key,c=t.type,r=t.value,o=t.onChange,i=t.size,s=t.readOnly,u=t.startAdornment,b=t.endAdornment,d=t.inputProps;return l.a.createElement(w.a,{id:a,key:n,className:(e.margin,e.spin),value:r,onChange:o,type:c,size:i,readOnly:s,startAdornment:u,endAdornment:b,inputProps:d})},x=a(1291);e.a=l.a.memo((function(t){Object(o.c)();var e=Object(r.useState)(0),a=Object(c.a)(e,2),y=a[0],w=a[1],k=Object(r.useState)(20),T=Object(c.a)(k,2),N=T[0],S=T[1],A=Object(r.useState)({direction:"asc",id:null}),R=Object(c.a)(A,2),_=R[0],C=R[1],I=t.data.table.tableContent,P=t.data.table.headers,H=t.data.table.rows,K=t.data.table.columns,B=[];return t.sortable&&H.map((function(t,e){B.push(Object(n.a)({},I[t.value]))})),l.a.createElement("div",{className:"flex flex-col min-h-full sm:border-1 sm:rounded-8 overflow-hidden w-full"},""!==t.data.title&&l.a.createElement("div",{className:"flex items-center justify-between px-16 py-16 border-b-1"},l.a.createElement(h.a,{className:"text-16"},t.data.title)),l.a.createElement(u.a,{className:"flex-growNum overflow-x-auto"},l.a.createElement(b.a,{stickyHeader:!0,className:"min-w-full",size:"small","aria-labelledby":"tableTitle"},l.a.createElement(m.a,null,l.a.createElement(O.a,null,K.map((function(t,e){switch(t.id){case"avatar":return l.a.createElement(p.a,{key:t.id,rowSpan:t.rowSpan,align:t.align,className:Object(s.default)("whitespace-wrap p-0 text-xs p-12 border-r-1")},t.title);default:return l.a.createElement(p.a,{key:t.id,colSpan:t.colSpan,rowSpan:t.rowSpan,align:"center",className:Object(s.default)("\n\t\t\t\t\t\t\t\t\t\t\t\t\twhitespace-wrap p-0 text-xs p-12 \n\t\t\t\t\t\t\t\t\t\t\t\t\t".concat(e===K.length-1?"border-r-0":"border-r-1"," \n\t\t\t\t\t\t\t\t\t\t\t\t\t").concat(t.color,"\n\t\t\t\t\t\t\t\t\t\t\t\t\t").concat(t.border,"\n\t\t\t\t\t\t\t\t\t\t\t\t"))},t.title)}}))),l.a.createElement(O.a,null,P.map((function(e,a){return l.a.createElement(p.a,{key:e.id,component:"th",scope:"rowNum",align:"center",sortDirection:_.id===e.id&&_.direction,className:Object(s.default)("\n\t\t\t\t\t\t\t\t\t\t\tw-md p-0 text-xs p-4 \n\t\t\t\t\t\t\t\t\t\t\t".concat(a===P.length-1?"border-r-0":"border-r-1"," \n\t\t\t\t\t\t\t\t\t\t\t").concat(e.color,"\n\t\t\t\t\t\t\t\t\t\t\t").concat(P.length>0&&P[a].border,"\n\t\t\t\t\t\t\t\t\t\t"))},t.sortable&&l.a.createElement(j.a,{title:"Sort",placement:"right"===e.align?"bottom-end":"bottom-start",enterDelay:300},l.a.createElement(f.a,{active:_.id===e.id,direction:_.direction,onClick:(n=e.id,function(t){var e=n,a="desc";_.id===n&&"desc"===_.direction&&(a="asc"),C({direction:a,id:e})})},e.value.substring(e.value.indexOf("@")+1))),!t.sortable&&e.value.substring(e.value.indexOf("@")+1));var n})))),l.a.createElement(d.a,null,!t.sortable&&!i.a.isEmpty(I)&&Object.keys(I).map((function(e,a){return l.a.createElement(O.a,{className:"h-32",key:a},!t.hideLeftHeader&&l.a.createElement(p.a,{key:a,component:"th",scope:"rowNum",align:"center",className:Object(s.default)("\n\t\t\t\t\t\t\t\t\t\t\tp-0 text-xs truncate border-r-1 \n\t\t\t\t\t\t\t\t\t\t\t".concat(H.length>0&&H[a].color,"\n\t\t\t\t\t\t\t\t\t\t\t").concat(H.length>0&&H[a].border,"\n\t\t\t\t\t\t\t\t\t\t"))},e),Object.keys(I[e]).map((function(n,c){return"id"!==n&&"type"!==n&&"month"!==n&&l.a.createElement(p.a,{key:"colKey_".concat(a,"_").concat(c),component:"th",scope:"rowNum",align:"center",className:Object(s.default)("\n\t\t\t\t\t\t\t\t\t\t\tp-0 text-xs truncate \n\t\t\t\t\t\t\t\t\t\t\t".concat(c===Object.keys(I[e]).length-1?"border-r-0":"border-r-1"," \n\t\t\t\t\t\t\t\t\t\t\t").concat(H.length>0&&H[a].border,"\n\t\t\t\t\t\t\t\t\t\t\t").concat(P.length>0&&0===K.length&&P[c+1].border,"\n\t\t\t\t\t\t\t\t\t\t\t").concat(P.length>0&&0!==K.length&&P[c].border,"\n\t\t\t\t\t\t\t\t\t\t"))},!t.editable&&0===K.length&&P.length>0&&Object(x.e)(I[e][P[c+1].value]),!t.editable&&0!==K.length&&P.length>0&&Object(x.e)(I[e][P[c].value]),t.editable&&l.a.createElement(E,{id:"contact phone number",key:"input_".concat(a,"_").concat(c),type:"number",value:Object(x.e)(I[e][n]),onChange:function(r){return function(e,a,n,c,r,l){t.onInputChange({tableName:e,row:a,col:n,rowKey:c,colKey:r,value:l})}(t.tableName,a,c,e,n,r.target.value)},size:"small",readOnly:!1,startAdornment:l.a.createElement(g.a,{position:"start"},t.startAdornment),endAdornment:l.a.createElement(g.a,{position:"start"},t.endAdornment),inputProps:{"aria-label":"naked"}}))})))})),t.sortable&&i.a.orderBy(B,[function(t){switch(_.id){case"categories":return t.categories[0];default:return t[_.id]}}],[_.direction]).slice(y*N,y*N+N).map((function(t,e){return l.a.createElement(O.a,{className:"h-32",key:e},l.a.createElement(p.a,{key:e,component:"th",scope:"rowNum",align:"center",className:Object(s.default)("\n\t\t\t\t\t\t\t\t\t\tp-0 text-xs truncate border-r-1 \n\t\t\t\t\t\t\t\t\t\t".concat(H.length>0&&H[e].color,"\n\t\t\t\t\t\t\t\t\t\t").concat(H.length>0&&H[e].border,"\n\t\t\t\t\t\t\t\t\t"))},e+1),Object.keys(t).map((function(a,n){return"id"!==a&&"type"!==a&&"month"!==a&&l.a.createElement(p.a,{key:"colKey_".concat(e,"_").concat(n),component:"th",scope:"rowNum",align:"center",className:Object(s.default)("\n\t\t\t\t\t\t\t\t\t\t\tp-0 text-xs truncate \n\t\t\t\t\t\t\t\t\t\t\t".concat(n===Object.keys(t).length-1?"border-r-0":"border-r-1"," \n\t\t\t\t\t\t\t\t\t\t\t").concat(H.length>0&&t.border,"\n\t\t\t\t\t\t\t\t\t\t\t").concat(P.length>0&&0===K.length&&P[n+1].border,"\n\t\t\t\t\t\t\t\t\t\t\t").concat(P.length>0&&0!==K.length&&P[n].border,"\n\t\t\t\t\t\t\t\t\t\t"))},0===K.length&&P.length>0&&Object(x.e)(t[a]))})))}))))),t.sortable&&l.a.createElement(v.a,{className:"flex-shrink-0 border-t-1",component:"div",count:B.length,rowsPerPage:N,page:y,backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"},onChangePage:function(t,e){w(e)},onChangeRowsPerPage:function(t){S(t.target.value)}}))}))},1298:function(t,e,a){"use strict";var n=a(0),c=a(81);e.a=Object(c.a)(n.createElement("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"}),"KeyboardArrowLeft")},1299:function(t,e,a){"use strict";var n=a(0),c=a(81);e.a=Object(c.a)(n.createElement("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"}),"KeyboardArrowRight")},1409:function(t,e,a){"use strict";a.d(e,"b",(function(){return u})),a.d(e,"c",(function(){return p}));var n=a(33),c=a(14),r=a.n(c),l=a(30),o=a(25),i=a(46),s=a.n(i),u=Object(o.b)("timeReportApp/widgets/getWidgets",Object(l.a)(r.a.mark((function t(){var e,a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.a.get("/api/time-report-app/widgets");case 2:return e=t.sent,t.next=5,e.data;case 5:return a=t.sent,t.abrupt("return",a);case 7:case"end":return t.stop()}}),t)})))),b=Object(o.c)({}),d=b.getSelectors((function(t){return t.timeReportApp.widgets})),p=d.selectEntities,m=(d.selectById,Object(o.d)({name:"timeReportApp/widgets",initialState:b.getInitialState(),reducers:{},extraReducers:Object(n.a)({},u.fulfilled,b.setAll)}));e.a=m.reducer},1432:function(t,e,a){"use strict";a.d(e,"b",(function(){return p})),a.d(e,"c",(function(){return m})),a.d(e,"d",(function(){return j}));var n=a(33),c=a(14),r=a.n(c),l=a(30),o=a(25),i=a(46),s=a.n(i),u=a(17),b=localStorage.getItem("@BELONGTO"),d=localStorage.getItem("@UID"),p=Object(o.b)("timeReportApp/track/getTracks",(function(t){return new Promise((function(e,a){var n=u.b.ref("TimeReport/".concat(b,"/").concat(d,"/").concat(t)),c=[];n.on("value",(function(t){var a=t.val();a&&Object.keys(a).map((function(t){c.push(a[t])})),e(a?[a]:[])}))}))})),m=Object(o.b)("timeReportApp/track/saveTrack",function(){var t=Object(l.a)(r.a.mark((function t(e,a){var n,c,l;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.dispatch,a.getState,t.next=3,s.a.post("/api/time-report-app/track/save",e);case 3:return c=t.sent,t.next=6,c.data;case 6:return l=t.sent,n(p(e.month)),t.abrupt("return",l);case 9:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()),O=Object(o.c)({}),f=O.getSelectors((function(t){return t.timeReportApp.tracks})),j=f.selectAll,v=(f.selectById,Object(o.d)({name:"timeReportApp/tracks",initialState:O.getInitialState({cell:{}}),reducers:{setCell:{reducer:function(t,e){var a=e.payload.tableName,n=e.payload.row,c=e.payload.col,r=e.payload.rowKey,l=e.payload.colKey,o=e.payload.value;t.cell={tableName:a,row:n,col:c,rowKey:r,colKey:l,value:o}},prepare:function(t){return{payload:t||""}}}},extraReducers:Object(n.a)({},p.fulfilled,O.setAll)}));v.actions.setCell;e.a=v.reducer},1484:function(t,e,a){"use strict";var n=a(85),c=a(1409),r=a(1432),l=a(33),o=a(25),i=(a(46),a(17)),s=Object(o.b)("timeReportApp/users/getUsers",(function(){return new Promise((function(t,e){var a=i.b.ref("users/"),n=[];a.on("value",(function(e){var a=e.val();a&&Object.keys(a).map((function(t){n.push(a[t])})),t(n)}))}))})),u=Object(o.c)({}),b=u.getSelectors((function(t){return t.timeReportApp.users})),d=(b.selectAll,b.selectById,Object(o.d)({name:"timeReportApp/users",initialState:u.getInitialState({production:""}),reducers:{setUser:{reducer:function(t,e){t.production=e.payload},prepare:function(t){return{payload:t.target.value||""}}}},extraReducers:Object(l.a)({},s.fulfilled,u.setAll)})),p=(d.actions.setUser,d.reducer),m=Object(n.c)({tracks:r.a,widgets:c.a,users:p});e.a=m},2426:function(t,e,a){"use strict";a.r(e);var n=a(33),c=a(6),r=a(13),l=a(0),o=a.n(l),i=a(8),s=a(113),u=a.n(s),b=a(93),d=a(161),p=(a(181),a(1284)),m=a(159),O=a(431),f=a(247),j=(a(9),a(1484)),v=a(19),g=a(1244),h=a(1293),y=(a(1310),a(1311),a(1312)),w=a(1313),k=a(1432),E=a(1409),x=a(1309),T=a(1291),N=[{id:"in",value:"In",type:!1,color:""},{id:"out",value:"Out",type:!1,color:""},{id:"lunch",value:"Lunch",type:!1,color:""},{id:"totalHrsWorked",value:"Total Hrs Worked",type:!1,color:""},{id:"vacation",value:"Vacation",type:!1,color:""},{id:"v",value:"V",type:!1,color:""},{id:"sick",value:"Sick",type:!1,color:""},{id:"s",value:"S",type:!1,color:""},{id:"bereavement",value:"Bereavement",type:!1,color:""},{id:"b",value:"B",type:!1,color:""},{id:"holiday",value:"Holiday",type:!1,color:""},{id:"totalHrs",value:"Total Hrs",type:!1,color:""},{id:"notes",value:"Notes",type:!1,color:""}],S=[],A={};e.default=Object(f.a)("timeReportApp",j.a)((function(t){var e=Object(i.c)(),a=Object(i.d)(k.d),s=Object(i.d)(E.c),f=Object(i.d)((function(t){return t.timeReportApp.tracks.cell})),j=Object(l.useState)(!0),R=Object(r.a)(j,2),_=R[0],C=R[1],I=Object(l.useState)({widgets:s}),P=Object(r.a)(I,2),H=P[0],K=P[1],B=Object(l.useState)("No"),M=Object(r.a)(B,2),W=M[0],L=M[1],U=Object(l.useState)(u()().format("MMMM")),z=Object(r.a)(U,2),D=z[0],Y=z[1],V=Object(l.useState)({}),J=Object(r.a)(V,2),F=J[0],G=J[1],q=Object(l.useState)("Time Track"),Q=Object(r.a)(q,2),X=Q[0];return Q[1],Object(l.useEffect)((function(){e(Object(k.b)(D)),e(Object(E.b)()).then((function(){return C(!1)}))}),[e]),Object(l.useEffect)((function(){e(Object(k.b)(D))}),[D]),Object(l.useEffect)((function(){s.Time_Track_Table&&Object.keys(F).length>0&&(s=Object(c.a)(Object(c.a)({},s),{},{Time_Track_Table:Object(c.a)(Object(c.a)({},s.Time_Track_Table),{},{table:Object(c.a)(Object(c.a)({},s.Time_Track_Table.table),{},{rows:F.tableRows})})}),s=Object(c.a)(Object(c.a)({},s),{},{Time_Track_Table:Object(c.a)(Object(c.a)({},s.Time_Track_Table),{},{table:Object(c.a)(Object(c.a)({},s.Time_Track_Table.table),{},{tableContent:F.tableContent})})}),console.log("----widgets=",s),K({widgets:s}))}),[s,F]),Object(l.useEffect)((function(){for(var t=u()().set("month",D).startOf("month"),e=u()().set("month",D).endOf("month"),n=t=t.startOf("isoWeek"),r=(e=e.endOf("isoWeek")).diff(t,"days")+1,l=[],o={},i=0;i<r;i++){var s=n.format("YYYY-MM-DD");n.add(1,"days"),l.push({id:s,value:s,color:(i+1)%7===0?"text-red-500":"",editable:!0}),(i+1)%7===0&&l.push({id:"Total",value:"Total".concat((i+1)/7),color:"",border:"border-t-4 border-b-4",editable:!1})}if(a.length>0){var b=Object(T.i)(x.m);l.map((function(t){o[t.value]={},N.map((function(e){o[t.value][e.value]=a[0][t.value][b[e.value]]}))}))}else l.map((function(t){o[t.value]={},N.map((function(e){o[t.value][e.value]=0}))}));S=[].concat(l),A=Object(c.a)({},o),console.log("-----track",l,o),G({tableRows:S,tableContent:A})}),[a]),Object(l.useEffect)((function(){var t=f.tableName,e=f.row,a=f.col,r=f.rowKey,l=f.colKey,o=parseFloat(""===f.value?0:f.value);if("TRACK"===t){A=Object(c.a)(Object(c.a)({},A),{},Object(n.a)({},r,Object(c.a)(Object(c.a)({},A[r]),{},Object(n.a)({},l,o)))),a<3&&(A=Object(c.a)(Object(c.a)({},A),{},Object(n.a)({},r,Object(c.a)(Object(c.a)({},A[r]),{},Object(n.a)({},"Total Hrs Worked",A[r].In+A[r].Out+A[r].Lunch))))),a>3&&a<11&&(A=Object(c.a)(Object(c.a)({},A),{},Object(n.a)({},r,Object(c.a)(Object(c.a)({},A[r]),{},Object(n.a)({},"Total Hrs",A[r].Vacation+A[r].Sick+A[r].Bereavement+A[r].Holiday)))));for(var i=(e-e%8)/8,s=0,u=0,b=0,d=0;d<7;d++)s+=A[S[8*i+d].value][l],u+=A[S[8*i+d].value]["Total Hrs Worked"],b+=A[S[8*i+d].value]["Total Hrs"];A=Object(c.a)(Object(c.a)({},A),{},Object(n.a)({},"Total".concat(i+1),Object(c.a)(Object(c.a)({},A["Total".concat(i+1)]),{},Object(n.a)({},l,s)))),A=Object(c.a)(Object(c.a)({},A),{},Object(n.a)({},"Total".concat(i+1),Object(c.a)(Object(c.a)({},A["Total".concat(i+1)]),{},Object(n.a)({},"Total Hrs Worked",u)))),A=Object(c.a)(Object(c.a)({},A),{},Object(n.a)({},"Total".concat(i+1),Object(c.a)(Object(c.a)({},A["Total".concat(i+1)]),{},Object(n.a)({},"Total Hrs",u-b)))),console.log("-----cell",A),G({tableRows:S,tableContent:A})}}),[f]),_?o.a.createElement(O.a,null):0===H.length?o.a.createElement(b.a,{delay:100},o.a.createElement("div",{className:"flex flex-1 items-center justify-center h-full"},o.a.createElement(m.a,{color:"textSecondary",variant:"h5"},"There are no data!"))):o.a.createElement(p.a,{classes:{content:"flex",contentCard:"overflow-hidden",header:"min-h-72 h-72 sm:h-136 sm:min-h-136"},header:o.a.createElement(w.a,{title:X},o.a.createElement("div",{className:"flex flex-1 items-center justify-center px-12"},o.a.createElement(b.a,{animation:"transition.slideUpIn",delay:300},o.a.createElement(y.a,{value:W,onChange:function(t){L(t.target.value)},label:"Calculate OT",data:x.a.ot.data}))),o.a.createElement("div",{className:"flex flex-1 items-center justify-center px-12"},o.a.createElement(b.a,{animation:"transition.slideUpIn",delay:300},o.a.createElement(y.a,{value:D,onChange:function(t){Y(t.target.value)},label:"Month",data:x.a.period.data}))),o.a.createElement(b.a,{animation:"transition.slideRightIn",delay:300},o.a.createElement(g.a,{component:v.a,className:"whitespace-nowrap normal-case",variant:"contained",color:"secondary",onClick:function(){var t=Object(T.i)(x.m),a={};a=Object(c.a)(Object(c.a)({},a),{},{id:D}),Object.keys(A).map((function(e){Object.keys(A[e]).map((function(r){a=Object(c.a)(Object(c.a)({},a),{},Object(n.a)({},e,Object(c.a)(Object(c.a)({},a[e]),{},Object(n.a)({},t[r],A[e][r]))))}))})),e(Object(k.c)({tracks:a,month:D}))}},o.a.createElement("span",{className:"hidden sm:flex"},"Save"),o.a.createElement("span",{className:"flex sm:hidden"},"New")))),content:o.a.createElement("div",{className:"w-full flex flex-col p-12"},o.a.createElement("div",{className:"p-12"},o.a.createElement(d.a,{className:"flex flex-wrap",enter:{animation:"transition.slideUpBigIn"}},o.a.createElement(h.a,{tableName:"TRACK",widget:H.widgets.Time_Track_Table,editable:!0})))),innerScroll:!0})}))}}]);